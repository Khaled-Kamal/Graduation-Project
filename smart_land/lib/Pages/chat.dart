import 'package:flutter/material.dart';

class ChatPage extends StatefulWidget {
  const ChatPage({super.key});

  @override
  State<ChatPage> createState() => _ChatPageState();
}

class _ChatPageState extends State<ChatPage> {
  List<Map<String, String>> messages = [
    {
      'from': 'bot',
      'text':
          'ูุฑุญุจูุงุ ุฃูุง AgriBot! ๐ ุฃูุง ูุณุงุนุฏู ุงูุฒุฑุงุนู ุงูุดุฎุตู. ููู ูููููู ูุณุงุนุฏุชู ุงูููู ูู ุชุฑุจุชูุ ูุญุงุตูููุ ุฃู ุฃุณูุฏุชูุ',
    },
  ];

  List<String> quickReplies = [
    "ุฃู ุณูุงุฏ ูุฌุจ ุฃู ุฃุณุชุฎุฏู ูุชุญุณูู ููู ุงููุจุงุชุงุชุ",
    "ูุง ูู ุงููุญุงุตูู ุงูููุงุณุจุฉ ูุชุญููู ุชุฑุจุชูุ",
    "ููู ุฃุฏุฎู ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูุชุฑุจุฉ ุงูุฎุงุต ุจูุ",
    "ููู ูููููู ุชุญุณูู ุงูุฎูุงุถ ุงูุฎุตูุจุฉ ูู ุชุฑุจุชูุ",
  ];

  final TextEditingController _controller = TextEditingController();
  String? selectedQuickReply;

  // Local question-answer database
  final Map<String, String> qaDatabase = {
    // Greeting responses
    "ุงูุณูุงู ุนูููู": "ุนูููู ุงูุณูุงู! ๐ ููู ูููููู ูุณุงุนุฏุชู ุงููููุ",
    "ุงูุช ููู": "ุฃูุง ูุณุงุนุฏู ุงูุฒุฑุงุนู ุงูุฐูู! ุฃูุง ููุง ููุณุงุนุฏุชู ูู ูู ูุง ูุฎุต ุฒุฑุงุนุชูุ ูู ุชุญุถูุฑ ุงูุฃุฑุถ ูุญุชู ุงูุญุตุงุฏ. ุจุฅููุงูู ุฃู ุฃุณุงุนุฏู ูู ููู ูุดุงูู ูุญุงุตูููุ ูุงุฎุชูุงุฑ ุฃูุถู ุงูุฃุณูุฏุฉ ูุงูุทุฑู ููุฑูุ ูููููุฉ ุชุญุณูู ููุนูุฉ ุชุฑุจุชู. ุณุฃุจุฐู ูุตุงุฑู ุฌูุฏู ูุชูุฏูู ูุตุงุฆุญ ุนูููุฉ ููุจุงุดุฑุฉุ ุจูุบุฉ ูุงุถุญุฉ ูุณููุฉ ุงูููู. ูู ูุฏูู ุฃู ูุดููุฉ ุฒุฑุงุนูุฉ ุชุฑุบุจ ูู ููุงูุดุชูุง ูุนู ุงูุขูุ ุฃู ุฑุจูุง ูุฏูู ุณุคุงู ูุญุฏุฏ ุนู ูุญุตูู ูุนููุ",
    
    // Original agricultural questions
    "ุฃู ุณูุงุฏ ูุฌุจ ุฃู ุฃุณุชุฎุฏู ูุชุญุณูู ููู ุงููุจุงุชุงุชุ": "ุจุต ูุง ุณูุฏูุ ุงุฎุชูุงุฑ ุงูุณูุงุฏ ุจูุนุชูุฏ ุนูู ููุน ุงูุฃุฑุถ ูุงูุฒุฑุน. ูู ุงูุฃุฑุถ ุนุงูุฒุฉ ุฏูุนุฉุ ุฌุฑุจ ุณูุงุฏ NPK (10-10-10) ูุชูุงุฒู. ูู ูุงูุตุฉ ููุชุฑูุฌููุ ุฎุฏ ุณูุงุฏ ููู ูุณุจุฉ ููุชุฑูุฌูู ุนุงููุฉ ุฒู (20-10-10).",
    "ูุง ูู ุงููุญุงุตูู ุงูููุงุณุจุฉ ูุชุญููู ุชุฑุจุชูุ": "ุจุต ูุง ุญุงุฌุ ูุงุฒู ุชุนูู ุชุญููู ุชุฑุจุฉ ุงูุฃูู ุนูุดุงู ุชุนุฑู ุงูู pH ูุงูุนูุงุตุฑ ุงููู ูููุง. ูู ุงูุฃุฑุถ ุญูุถูุฉ (pH 5.5-6.5)ุ ุงูุจุทุงุทุณ ูููุณุฉ. ูู ููููุฉ (pH 7-8)ุ ุงูููุญ ูุงูุดุนูุฑ ููููุนูู.",
    "ููู ุฃุฏุฎู ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ุงูุชุฑุจุฉ ุงูุฎุงุต ุจูุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ูุชูุฏุฑ ุชุฏุฎู ูุชุงูุฌ ุชุญููู ุงูุชุฑุจุฉ ูู ุงูุชุทุจูู ูุฏูู. ุญุท ููู ุฒู ุงูู pHุ ุงูููุชุฑูุฌููุ ุงูููุณููุฑุ ูุงูุจูุชุงุณููู. ูู ุนุงูุฒ ูุณุงุนุฏุฉุ ูููู ุงููุชุงูุฌ ูุฃูุง ุฃูุณุฑูุง ูู!",
    "ููู ูููููู ุชุญุณูู ุงูุฎูุงุถ ุงูุฎุตูุจุฉ ูู ุชุฑุจุชูุ": "ุจุต ูุง ุญุงุฌุ ูู ุงูุฃุฑุถ ุฎุตูุจุชูุง ููุฎูุถุฉุ ุฌุฑุจ ุงูุญุงุฌุงุช ุฏู: ุฒููุฏ ุฒุจู ุจูุฏู ุฃู ูููุจูุณุชุ ุฏู ุจูุฎููู ุงูุฃุฑุถ ุฃุฎุตุจ ููุญุณู ุชุตุฑูู ุงูููุฉ. ุฒุฑุน ูุญุงุตูู ุจููููุฉ ุฒู ุงูููู ุฃู ุงูุนุฏุณ ุจูุซุจุช ุงูููุชุฑูุฌููุ ูุฏู ุนูุตุฑ ููู ูููุจุงุชุงุช. ุบููุฑ ุงููุญุงุตูู ูู ุณูุฉ (ุชูุงูุจ ุฒุฑุงุนู) ุนูุดุงู ุงูุฃุฑุถ ูุชุณุชูุฒูุด. ุงุนูู ุชุญููู ุชุฑุจุฉ ูู ูุชุฑุฉุ ูุดูู ุฅูู ุงูุนูุงุตุฑ ุงููุงูุตุฉ ูุงุณุชุฎุฏู ุงูุณูุงุฏ ุงูููุงุณุจ. ููู ุงูุญุฑุซ ุงูุนููู ุนูุดุงู ุชุญุงูุธ ุนูู ุงููุงุฆูุงุช ุงูุญูุฉ ูู ุงูุฃุฑุถ. ูููู ูู ุนูุฏู ูุชุงูุฌ ุงูุชุญูููุ ุฅูู ุงูุนูุงุตุฑ ุงููุงูุตุฉุ",
    "ูุง ูู ุฃูุถู ููุช ูุฒุฑุงุนุฉ ุงูููุญุ": "ุจุต ูุง ุญุงุฌุ ุงูููุญ ุจูุญุจ ุงูุฎุฑูู (ุฃูุชูุจุฑ-ููููุจุฑ) ุนูุดุงู ููุญู ูููู ูุจู ุงูุดุชุง. ุจุณ ูู ูู ูุตุฑุ ุญุงูู ุชุจุฏุฃ ูู ุฃูุงุฎุฑ ุฃูุชูุจุฑ.",
    "ููู ุฃุนุงูุฌ ุขูุงุช ุงููู ุนูู ุงููุจุงุชุงุชุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฌุฑุจ ุตุงุจูู ูุจูุฏ ุญุดุฑู ุฃู ุฒูุช ุงูููู. ุฑุฐุงุฐ ุงูููุฉ ูุน ุงูุตุงุจูู (5 ูู ููู ูุชุฑ ููุฉ) ุจูุฎููุตู ูู ุงููู ุจุณุฑุนุฉ ูุขูู.",
    "ูุง ูู ุฃุณุจุงุจ ุงุตูุฑุงุฑ ุฃูุฑุงู ุงููุจุงุชุ": "ุจุต ูุง ุณูุฏูุ ุงูุฃูุฑุงู ูู ุจุชุตูุฑ ูุจูู ูููู ูุงูุตูุง ููุชุฑูุฌููุ ุฃู ุจุชุชุฑูู ุฒูุงุฏุฉุ ุฃู ุนูุฏูุง ููุต ุญุฏูุฏ. ุดูู ุงูุฃุฑุถ ูููุณ ูุงุถุจุท ุงูุฑู ูุงูุณูุงุฏ.",
    "ููู ุฃุญุงูุธ ุนูู ุฑุทูุจุฉ ุงูุชุฑุจุฉุ": "ุจุต ูุง ุญุงุฌุ ุญุท ุชุจู ุฃู ูุดุฑ ุฃุฑุฒ ููู ุงูุฃุฑุถ ูููุงุฏ. ุฏู ุจูููู ุงูุชุจุฎุฑ ููุฎูู ุงูุฃุฑุถ ุฑุทุจุฉ ุฃูุชุฑ.",
    "ูุง ูู ุฃูุถู ุงููุญุงุตูู ููุชุฑุจุฉ ุงูุฑูููุฉุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุชุฑุจุฉ ุงูุฑูููุฉ ูููุณุฉ ููุฌุฒุฑุ ุงูุจุทุงุทุณุ ูุงูููู ุงูุณูุฏุงููุ ูุฃููุง ุจุชุญุจ ุงูุชุตุฑูู ุงูุณุฑูุน.",
    "ููู ุฃุนุฑู ุฅุฐุง ูุงูุช ุงูุชุฑุจุฉ ููููุฉุ": "ุจุต ูุง ุณูุฏูุ ุฌูุจ ุฌูุงุฒ ุชุญููู ุชุฑุจุฉ ุฃู ูููุณ ุงูุฃุฑุถ ุนูุฏ ูุฎุชุจุฑ. ูู ุงูู pH ุฃุนูู ูู 7ุ ูุจูู ุงูุฃุฑุถ ููููุฉ.",
    "ูุง ูู ุงูุชุณููุฏ ุงูุฃุฎุถุฑุ": "ุจุต ูุง ุญุงุฌุ ุงูุชุณููุฏ ุงูุฃุฎุถุฑ ูุนูู ุชุฒุฑุน ุญุงุฌุฉ ุฒู ุงูุจุฑุณูู ุฃู ุงูููู ูุจุนุฏูู ุชุญุฑุซูู ูู ุงูุฃุฑุถ ุนูุดุงู ุชุฒูุฏ ุงูููุงุฏ ุงูุนุถููุฉ ูุชุฎูููุง ุฃุฎุตุจ.",
    "ููู ุฃุญูู ูุญุงุตููู ูู ุงูุตููุนุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุญุท ุฃุบุทูุฉ ุนูู ุงููุจุงุชุงุช ุฃู ุงุฑููู ุฎููู ูุจู ุงูุตููุน. ูู ููููุ ุงุฒุฑุน ุฃุตูุงู ุจุชุณุชุญูู ุงูุจุฑุฏ.",
    "ูุง ูู ููุงุฆุฏ ุฒุฑุงุนุฉ ุงูุฐุฑุฉุ": "ุจุต ูุง ุณูุฏูุ ุงูุฐุฑุฉ ุจุชุณุชุฎุฏู ููุฃููุ ุงูุนููุ ูุงูุตูุงุนุฉ. ููุงู ุจุชุณุงุนุฏ ุงูุฃุฑุถ ูู ุจุชุฒุฑุนูุง ุจุงูุชูุงูุจ ูุน ูุญุงุตูู ุชุงููุฉ.",
    "ููู ุฃุฒุฑุน ุงูุทูุงุทูุ": "ุจุต ูุง ุญุงุฌุ ุงูุทูุงุทู ุนุงูุฒุฉ ุฃุฑุถ ุชุตุฑู ุงูููุฉ ูููุณุ ุดูุณ ูุชูุฑุ ูุฑู ููุชุธู. ุงุฒุฑุน ุงูุดุชูุงุช ูู ุงูุฑุจูุน ุจุนุฏ ูุง ุงูุตููุน ูุฎููุต.",
    "ูุง ูู ุฃูุถู ุณูุงุฏ ููุทูุงุทูุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฌุฑุจ ุณูุงุฏ ููู ููุณููุฑ ูุจูุชุงุณููู ุนุงูู ุฒู NPK (5-10-10) ุนูุดุงู ุงูุฒูุฑ ูุงูุทูุงุทู ุชุทูุน ูููุณุฉ.",
    "ููู ุฃููุน ุฃูุฑุงุถ ุงููุทุฑูุงุช ูู ุงููุญุงุตููุ": "ุจุต ูุง ุณูุฏูุ ุงุณุชุฎุฏู ูุจูุฏุงุช ูุทุฑูุฉ ุทุจูุนูุฉ ุฒู ุงููุจุฑูุชุ ูุฎููู ููุงุก ูุนุฏู ุจูู ุงููุจุงุชุงุชุ ููุชูุชุฑุด ูู ุงูุฑู.",
    "ูุง ูู ููุงุฆุฏ ุงูุชูุงูุจ ุงูุฒุฑุงุนูุ": "ุจุต ูุง ุญุงุฌุ ุงูุชูุงูุจ ุจูููู ุงูุญุดุฑุงุช ูุงููุฑุถ ูู ุงูุฃุฑุถุ ูุจูุฎููููุง ุฃุฎุตุจ ูุฃูู ุจูููุน ุงุณุชูุฒุงู ุงูุนูุงุตุฑ.",
    "ููู ุฃุนุงูุฌ ููุต ุงููุบุฐูุงุช ูู ุงููุจุงุชุงุชุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงุนูู ุชุญููู ุชุฑุจุฉ ูุดูู ุฅูู ุงููุงูุต. ูู ุงูุฃูุฑุงู ุตูุฑุงุ ุฒููุฏ ููุชุฑูุฌูู. ูู ุงูุฒูุฑ ุถุนููุ ุฒููุฏ ููุณููุฑ.",
    "ูุง ูู ุฃูุถู ุทุฑููุฉ ูุฑู ุงููุญุงุตููุ": "ุจุต ูุง ุณูุฏูุ ุงูุฑู ุจุงูุชูููุท ุฃุญุณู ุญุงุฌุฉ ูุฃูู ุจููุตู ุงูููุฉ ููุฌุฐูุฑ ุนูู ุทูู ูุจูููุฑ ููุฉุ ุฎุตูุตูุง ููุฎุถุงุฑ.",
    "ุฅุฒุงู ุฃุฎููู ุงูุฃุฑุถ ุชุฎุถุฑ ุจุณุฑุนุฉุ": "ุจุต ูุง ุญุงุฌุ ุฒููุฏ ุฒุจู ุจูุฏู ุฃู ูููุจูุณุชุ ููู ุนุงูุฒ ุชุณุฑูุนุ ุฑุด ุณูุงุฏ ููุชุฑูุฌูู ุณุงุฆู ุนูู ุงูุฃูุฑุงู.",
    "ุฅูู ุฃุญุณู ุฒุฑุนุฉ ููุฃุฑุถ ุงูุทูููุฉุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุฃุฑุถ ุงูุทูููุฉ ูููุณุฉ ููุฃุฑุฒ ูุงูููุญ ูุฃููุง ุจุชุญุชูุธ ุจุงูููุฉ. ุจุณ ุฎููู ุจุงูู ูู ุงูุชุตุฑูู.",
    "ูู ุงูุชุฑุจุฉ ูููุงูุฉ ููุญุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุณูุฏูุ ุงุบุณู ุงูุฃุฑุถ ุจุงูููุฉ ูููุณ ูุฎููููุง ุชุตุฑู. ุฒุฑุน ุงููุตุฉ ููุงู ุจูุณุงุนุฏ ูููู ุงูููุญ.",
    "ุฅุฒุงู ุฃุนุฑู ูู ุงููุจุงุช ุนุทุดุงูุ": "ุจุต ูุง ุญุงุฌุ ูู ุงูุฃูุฑุงู ุจุฏุฃุช ุชููู ุฃู ุชุชุตูุฑ ูู ุชุญุชุ ูุจูู ุงููุจุงุช ุนุงูุฒ ููุฉ. ุฌุฑุจ ุงูููุฉ ุนูู ุฅูุฏู ุงูุฃูู.",
    "ุฅูู ุฃุญุณู ุณูุงุฏ ููุฎูุงุฑุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุฎูุงุฑ ุนุงูุฒ ุณูุงุฏ ููู ุจูุชุงุณููู ุนุงูู ุฒู NPK (5-5-15) ุนูุดุงู ุงูุซูุฑ ููุจุฑ.",
    "ูู ุงููุจุงุชุงุช ุจุชุงุนู ูุด ุจุชูุจุฑุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุณูุฏูุ ุดูู ูู ุงูุฃุฑุถ ูุงูุตุฉ ุนูุงุตุฑ ุฒู ุงูููุชุฑูุฌูู ุฃู ุงูููุณููุฑ. ุงุนูู ุชุญููู ุชุฑุจุฉ ูุงุถุจุท ุงูุณูุงุฏ.",
    "ุฅุฒุงู ุฃููุน ุงูุฏูุฏ ูู ุฃูู ุงููุญุงุตููุ": "ุจุต ูุง ุญุงุฌุ ุฌุฑุจ ุฒูุช ุงูููู ุฃู ูุจูุฏ ุญููู ุฒู ุงูุจุงุณูููุณ. ููุงู ูุธูู ุงูุฃุฑุถ ูู ุจูุงูุง ุงูุฒุฑุน ุงููุฏูู.",
    "ุฅูู ุฃุญุณู ููุช ูุฒุฑุงุนุฉ ุงูุจุงููุฉุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุจุงููุฉ ุจุชุญุจ ุงูุตูู. ุงุฒุฑุนูุง ูู ุฃุจุฑูู ุฃู ูุงูู ููุง ุงูุฌู ูุฏูู.",
    "ูู ุงูุฃุฑุถ ูุงุดูุฉ ูููุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุณูุฏูุ ุญุท ููุงุฏ ุฒู ุงูุชุจูุ ูุงุณุชุฎุฏู ุฑู ุจุงูุชูููุท ุนูุดุงู ุงูููุฉ ุชูุตู ููุฌุฐูุฑ ุจุณุฑุนุฉ.",
    "ุฅุฒุงู ุฃุฒุฑุน ุงูููู ุงูุณูุฏุงููุ": "ุจุต ูุง ุญุงุฌุ ุงูููู ุงูุณูุฏุงูู ุนุงูุฒ ุฃุฑุถ ุฑูููุฉ ูุดูุณ ูุชูุฑ. ุงุฒุฑุนู ูู ูุงูู ูุฑุด ุณูุงุฏ ููุณููุฑ ุนุงูู.",
    "ุฅูู ุงููู ูุฎููู ุงูุทูุงุทู ุชุชุดููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุชุดูู ุจูุญุตู ูู ุงูุฑู ูุด ููุชุธู. ุญุงูู ุชุฎููู ุงูููุฉ ุซุงุจุชุฉ ููุชูุชุฑุด ูุฑุฉ ูุงุญุฏุฉ.",
    "ููู ุฃุฎููู ุงููุฑุงููุฉ ุชุทูุน ุญููุฉุ": "ุจุต ูุง ุณูุฏูุ ุฒููุฏ ุจูุชุงุณููู ูู ุงูุณูุงุฏ (ุฒู NPK 5-5-20) ูุฎููู ุงูุฃุฑุถ ุฑุทุจุฉ ุจุณ ูุด ุบุฑูุงูุฉ.",
    "ุฅุฒุงู ุฃุนุงูุฌ ุงููุทุฑูุงุช ูู ุงูุจุทุงุทุณุ": "ุจุต ูุง ุญุงุฌุ ุงุณุชุฎุฏู ูุจูุฏ ูุทุฑู ุฒู ุงููุจุฑูุชุ ูุฎููู ุงูุฃุฑุถ ุชุตุฑู ุงูููุฉ ูููุณ ุนูุดุงู ุงููุทุฑูุงุช ูุชุฒูุฏุด.",
    "ุฅูู ุฃุญุณู ุฒุฑุนุฉ ููุฃุฑุถ ุงูุบุฑูุงูุฉุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุฃุฑุฒ ุฃุญุณู ุญุงุฌุฉ ููุฃุฑุถ ุงูุบุฑูุงูุฉ ูุฃูู ุจูุญุจ ุงูููุฉ ุงููุชูุฑ.",
    "ูู ุงููุจุงุช ุจูุฐุจูุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุณูุฏูุ ุดูู ุงูุฑู ุงูุฃูู. ูู ุฒูุงุฏุฉุ ููู ุงูููุฉ. ูู ูุงูุตุ ุฒููุฏ. ููุงู ูููู ูููู ููู ุญุดุฑุฉ ูู ุงูุฌุฐูุฑุ ูุญุต ูููุณ.",
    "ุฅุฒุงู ุฃุนุฑู ูู ุงูุฃุฑุถ ูุงูุตุฉ ุญุฏูุฏุ": "ุจุต ูุง ุญุงุฌุ ูู ุงูุฃูุฑุงู ุตูุฑุง ุจุณ ุงูุนุฑูู ูููุง ุฎุถุฑุงุ ูุจูู ูุงูุตูุง ุญุฏูุฏ. ุฑุด ููุงุจ ุญุฏูุฏ ุนูู ุงูุฃูุฑุงู.",
    "ุฅูู ูุงูุฏุฉ ุฒุฑุงุนุฉ ุงูุจุฑุณููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุจุฑุณูู ุจูุฎููู ุงูุฃุฑุถ ุฃุฎุตุจ ูุฃูู ุจูุซุจุช ุงูููุชุฑูุฌููุ ูููุงู ุจูููุน ุงูุญุดุงูุด.",
    "ููู ุฃุฒุฑุน ุงูุจุตูุ": "ุจุต ูุง ุณูุฏูุ ุงูุจุตู ุนุงูุฒ ุฃุฑุถ ุชุตุฑู ูููุณ ูุดูุณ. ุงุฒุฑุนู ูู ุฃูุชูุจุฑ ุฃู ููููุจุฑ ูุงุณุชุฎุฏู ุณูุงุฏ NPK (10-20-10).",
    "ุฅุฒุงู ุฃููุน ุงูุญุดุงูุด ูู ุงูุฃุฑุถุ": "ุจุต ูุง ุญุงุฌุ ุงุณุชุฎุฏู ููุงุฏ ุฒู ุงูุชุจู ุฃู ุงูุจูุงุณุชูู ุงูุฃุณูุฏุ ููู ุนุงูุฒ ุชูุธููุง ูุฏููุ ุงููุน ุงูุญุดุงูุด ูู ุงูุฌุฐูุฑ.",
    "ุฅูู ุฃุญุณู ุณูุงุฏ ูููุทูุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงููุทู ุนุงูุฒ ุณูุงุฏ ููุชุฑูุฌูู ุนุงูู ูู ุงูุฃูู (ุฒู 20-10-10)ุ ูุจุนุฏูู ุฒููุฏ ุงูุจูุชุงุณููู ููุง ูุจุฏุฃ ูุทูุน ุฒูุฑ.",
    "ูู ุงูุฐุฑุฉ ูุด ุจุชุทูุน ููุฒ ูุจูุฑุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุณูุฏูุ ุฒููุฏ ุณูุงุฏ ุจูุชุงุณููู ูููุณููุฑ (ุฒู NPK 5-10-15)ุ ูุชุฃูุฏ ุฅู ุงูุฑู ููุชุธู ูุงูุดูุณ ูุงููุฉ.",
    "ุฅุฒุงู ุฃุนุงูุฌ ุฏูุฏุฉ ุงููุตุจุ": "ุจุต ูุง ุญุงุฌุ ุงุณุชุฎุฏู ูุจูุฏ ุญููู ุฒู ุงูุจุงุณูููุณุ ููุธูู ุจูุงูุง ุงููุตุจ ุงููุฏูู ุนูุดุงู ุงูุญุดุฑุฉ ูุชุชุฑุจุงุด.",
    "ููู ุฃุฎููู ุงูุชุฑุจุฉ ุชุญุชูุธ ุจุงูููุฉุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฒููุฏ ูููุจูุณุช ุฃู ุฒุจู ุจูุฏูุ ูุงุณุชุฎุฏู ููุงุฏ ุฒู ูุดุฑ ุงูุฃุฑุฒ ุนูุดุงู ูููู ุงูุชุจุฎุฑ.",
    "ุฅูู ุฃุญุณู ููุช ูุฒุฑุงุนุฉ ุงูุฎุณุ": "ุจุต ูุง ุณูุฏูุ ุงูุฎุณ ุจูุญุจ ุงูุฌู ุงูุจุงุฑุฏ. ุงุฒุฑุนู ูู ุงูุฎุฑูู (ุฃูุชูุจุฑ-ููููุจุฑ) ุฃู ุงูุฑุจูุน (ูุจุฑุงูุฑ-ูุงุฑุณ).",
    "ูู ุงูุฃุฑุถ ูููุง ูููุงุชูุฏุงุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุญุงุฌุ ุฌุฑุจ ุฒุฑุงุนุฉ ูุจุงุชุงุช ุฒู ุงููุทููุฉ (Marigold) ูุฃููุง ุจุชููู ุงููููุงุชูุฏุงุ ูุงุณุชุฎุฏู ูุจูุฏ ูููุงุชูุฏุง ูู ุงููุดููุฉ ูุจูุฑุฉ.",
    "ุฅุฒุงู ุฃุนุฑู ูู ุงููุจุงุช ูุงูุตู ุจูุชุงุณูููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ูู ุงูุฃูุฑุงู ุจูู ููููุง ุจูู ูู ุงูุฃุทุฑุงูุ ูุจูู ูุงูุตูุง ุจูุชุงุณููู. ุฒููุฏ ุณูุงุฏ ุฒู NPK 5-5-20.",
    "ุฅูู ูุงูุฏุฉ ุฒุฑุงุนุฉ ุงููููุ": "ุจุต ูุง ุณูุฏูุ ุงูููู ุจูุซุจุช ุงูููุชุฑูุฌูู ูู ุงูุฃุฑุถุ ูุนูู ุจูุฎููููุง ุฃุฎุตุจุ ูููุงู ุจูุทููุน ูุญุตูู ูููุณ ููุฃูู.",
    "ููู ุฃุฒุฑุน ุงูููุณุฉุ": "ุจุต ูุง ุญุงุฌุ ุงูููุณุฉ ุนุงูุฒุฉ ุฃุฑุถ ุฎูููุฉ ูุดูุณ ูุชูุฑ. ุงุฒุฑุนูุง ูู ุงูุฑุจูุน (ูุงุฑุณ-ุฃุจุฑูู) ูุฑุด ุณูุงุฏ NPK (10-10-10).",
    "ุฅุฒุงู ุฃููุน ุงูุชุฑุจุฉ ูู ุงูุชุตุญุฑุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฒููุฏ ููุงุฏ ุนุถููุฉ ุฒู ุงููููุจูุณุชุ ูุฒุฑุน ูุจุงุชุงุช ุจุชุบุทู ุงูุฃุฑุถ ุฒู ุงูุจุฑุณูู ุนูุดุงู ุชุญูููุง.",
    "ุฅูู ุฃุญุณู ุณูุงุฏ ูููุงูุฌูุ": "ุจุต ูุง ุณูุฏูุ ุงููุงูุฌู ุนุงูุฒุฉ ุณูุงุฏ ููู ุจูุชุงุณููู ุนุงูู ุฒู NPK (5-5-20) ุนูุดุงู ุงูุซูุฑ ูุทูุน ูููุณ.",
    "ูู ุงููุจุงุชุงุช ุจุชููุช ูู ุบูุฑ ุณุจุจุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุญุงุฌุ ูุญูุต ุงูุฌุฐูุฑ ูููุณ. ูููู ูููู ููู ูุทุฑูุงุช ุฃู ูููุงุชูุฏุง. ุงุนูู ุชุญููู ุชุฑุจุฉ ูุงุณุชุฎุฏู ูุจูุฏ ููุงุณุจ.",
    "ุฅุฒุงู ุฃุฎููู ุงููุญุตูู ูุทูุน ุฃูุชุฑุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงุถุจุท ุงูุณูุงุฏ ูุงูุฑูุ ูุงุณุชุฎุฏู ุจุฐูุฑ ูููุณุฉ. ุงูุชูุงูุจ ุงูุฒุฑุงุนู ููุงู ุจูุฒูุฏ ุงูุฅูุชุงุฌ.",
    "ุฅูู ุฃุญุณู ุฒุฑุนุฉ ููุฃุฑุถ ุงูุฌุฏูุฏุฉุ": "ุจุต ูุง ุณูุฏูุ ูู ุงูุฃุฑุถ ุฌุฏูุฏุฉุ ุฌุฑุจ ุงูุจุฑุณูู ุฃู ุงูููู ุงูุฃูู ุนูุดุงู ูุฎูููุง ุงูุฃุฑุถ ุฃุฎุตุจ ูุจู ูุง ุชุฒุฑุน ูุญุงุตูู ุชุงููุฉ.",
    "ููู ุฃุนุงูุฌ ุงูุจูุงุถ ุงูุฏูููู ูู ุงููุจุงุชุงุชุ": "ุจุต ูุง ุญุงุฌุ ุงุณุชุฎุฏู ูุจูุฏ ูุทุฑู ุฒู ุงููุจุฑูุช ุฃู ุฒูุช ุงููููุ ูููู ุงูุฑู ูุฎููู ููุงุก ูุนุฏู ุจูู ุงููุจุงุชุงุช.",
    "ุฅุฒุงู ุฃุฒุฑุน ุงูุฑูุงูุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุฑูุงู ุนุงูุฒ ุฃุฑุถ ุชุตุฑู ุงูููุฉ ูุดูุณ ูุชูุฑ. ุงุฒุฑุนู ูู ุงูุฑุจูุน ูุงุณุชุฎุฏู ุณูุงุฏ NPK (10-10-10).",
    "ุฅูู ุงููู ูุฎููู ุงูุฒูุฑ ููุน ูู ุงููุจุงุชุ": "ุจุต ูุง ุณูุฏูุ ุงูุฒูุฑ ุจููุน ูู ููู ููุต ุจูุชุงุณููู ุฃู ุฑู ุฒูุงุฏุฉ. ุงุถุจุท ุงูุณูุงุฏ ูุงูููุฉ ูููุณ.",
    "ููู ุฃุฎููู ุงูุฃุฑุถ ูุงุนูุฉุ": "ุจุต ูุง ุญุงุฌุ ุงุญุฑุซ ุงูุฃุฑุถ ูููุณ ูุฒููุฏ ูููุจูุณุช ุฃู ุฒุจู ุจูุฏู ุนูุดุงู ุชุฎููููุง ูุงุนูุฉ ูุฎุตุจุฉ.",
    "ุฅุฒุงู ุฃุนุฑู ูู ุงูุฃุฑุถ ูุงูุตุฉ ููุณููุฑุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ูู ุงููุจุงุช ุจูุทูุน ุตุบูุฑ ูุงูุฃูุฑุงู ููููุง ุจููุณุฌูุ ูุจูู ูุงูุตูุง ููุณููุฑ. ุฒููุฏ ุณูุงุฏ ุฒู NPK (10-20-10).",
    "ุฅูู ุฃุญุณู ููุช ูุฒุฑุงุนุฉ ุงูุฌุฒุฑุ": "ุจุต ูุง ุณูุฏูุ ุงูุฌุฒุฑ ุจูุญุจ ุงูุฌู ุงูุจุงุฑุฏ. ุงุฒุฑุนู ูู ุงูุฎุฑูู (ุฃูุชูุจุฑ-ููููุจุฑ) ุฃู ุงูุฑุจูุน (ูุจุฑุงูุฑ-ูุงุฑุณ).",
    "ูู ุงูุชุฑุจุฉ ูููุง ุฑูู ูุชูุฑุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุญุงุฌุ ุฒููุฏ ูููุจูุณุช ุฃู ุฒุจู ุจูุฏู ุนูุดุงู ุงูุฃุฑุถ ุชุญุชูุธ ุจุงูููุฉ ูุงูุนูุงุตุฑ ุงูุบุฐุงุฆูุฉ.",
    "ุฅุฒุงู ุฃููุน ุงูุนูู ูู ุงูุฌุฐูุฑุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฎููู ุงูุฃุฑุถ ุชุตุฑู ุงูููุฉ ูููุณุ ูุงุณุชุฎุฏู ูุจูุฏ ูุทุฑู ูู ูููุช ุนูู ูู ุงูุฌุฐูุฑ.",
    "ุฅูู ูุงูุฏุฉ ุฒุฑุงุนุฉ ุงูุดุนูุฑุ": "ุจุต ูุง ุณูุฏูุ ุงูุดุนูุฑ ูููุณ ููุนูู ูุงูุฃููุ ูุจูุณุชุญูู ุงูุฃุฑุถ ุงูููุญูุฉ ูุงูุฌุงูุฉ ุฃุญุณู ูู ุงูููุญ.",
    "ููู ุฃุฒุฑุน ุงูุจุทูุฎุ": "ุจุต ูุง ุญุงุฌุ ุงูุจุทูุฎ ุนุงูุฒ ุฃุฑุถ ุฑูููุฉุ ุดูุณ ูุชูุฑุ ูุฑู ููุชุธู. ุงุฒุฑุนู ูู ุงูุตูู (ูุงูู-ููููู).",
    "ุฅุฒุงู ุฃุนุงูุฌ ุงูุญุดุฑุงุช ุงูุตุบูุฑุฉ ูู ุงูุฃุฑุถุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฌุฑุจ ุฒูุช ุงูููู ุฃู ูุจูุฏ ุญูููุ ููุธูู ุงูุฃุฑุถ ูู ุงูุญุดุงูุด ูุจูุงูุง ุงูุฒุฑุน.",
    "ุฅูู ุฃุญุณู ุณูุงุฏ ููุนูุจุ": "ุจุต ูุง ุณูุฏูุ ุงูุนูุจ ุนุงูุฒ ุณูุงุฏ ููู ุจูุชุงุณููู ุนุงูู ุฒู NPK (5-5-20) ุนูุดุงู ุงููุฑูู ุชุทูุน ุญููุฉ.",
    "ูู ุงูุฃุฑุถ ูููุง ุญุฌุงุฑุฉ ูุชูุฑุ ุฃุนูู ุฅููุ": "ุจุต ูุง ุญุงุฌุ ูุธูู ุงูุญุฌุงุฑุฉ ุงููุจูุฑุฉ ูุฏููุ ูุญุฑุซ ุงูุฃุฑุถ ูููุณ. ุฒููุฏ ูููุจูุณุช ุนูุดุงู ุชุฎููููุง ุฎุตุจุฉ.",
    "ุฅุฒุงู ุฃุฎููู ุงูุฎุถุงุฑ ูุทูุน ุทุนูู ุญููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุฒููุฏ ุจูุชุงุณููู ูู ุงูุณูุงุฏุ ูุฎููู ุงูุฑู ููุชุธูุ ูุงุณุชุฎุฏู ุจุฐูุฑ ูููุณุฉ.",
    "ุฅูู ุฃุญุณู ุฒุฑุนุฉ ููุฃุฑุถ ุงูููุญูุฉุ": "ุจุต ูุง ุณูุฏูุ ุงูุดุนูุฑ ูุงููุตุฉ ูููุณูู ููุฃุฑุถ ุงูููุญูุฉุ ููู ุนุงูุฒ ุฎุถุงุฑุ ุฌุฑุจ ุงูุจูุฌุฑ.",
    "ููู ุฃุนุฑู ูู ุงููุจุงุช ูุงูุตู ุฒููุ": "ุจุต ูุง ุญุงุฌุ ูู ุงูุฃูุฑุงู ุตุบูุฑุฉ ูุจูุถุง ูู ูููุ ูุจูู ูุงูุตูุง ุฒูู. ุฑุด ููุงุจ ุฒูู ุนูู ุงูุฃูุฑุงู.",
    "ุฅุฒุงู ุฃุฒุฑุน ุงูุฒูุชููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุงูุฒูุชูู ุนุงูุฒ ุฃุฑุถ ุชุตุฑู ุงูููุฉ ูุดูุณ ูุชูุฑ. ุงุฒุฑุนู ูู ุงูุฑุจูุน ูุงุณุชุฎุฏู ุณูุงุฏ NPK (10-10-10).",
    "ุฅูู ุงููู ูุฎููู ุงูุซูุฑ ูุทูุน ุตุบูุฑุ": "ุจุต ูุง ุณูุฏูุ ุงูุซูุฑ ุจูุทูุน ุตุบูุฑ ูู ุงูุฑู ูููู ุฃู ููู ููุต ุจูุชุงุณููู. ุฒููุฏ ุงูุณูุงุฏ ูุงูููุฉ ูุงุถุจุท ุงูุชูุงุฒู.",
    "ุฅูู ุงููุตุงูุญ ุงููู ุชุณุงุนุฏ ุนูู ุฒูุงุฏุฉ ุฅูุชุงุฌ ุงูุซููุ": "ุจุณ ููุจุงูุฉ ุงูุดุงู ุจุชุงุนุชูุ ุนุดุงู ุชุฒูุฏ ุฅูุชุงุฌ ุงูุซููุ ุฑูุฒ ุนูู ุงูุญุงุฌุงุช ุฏู: ุงูุฃุฑุถ ูุงุฒู ุชููู ุฎุตุจุฉ ูุชุตุฑู ุงูููุฉ ูููุณุ ุฌุฑุจ ุชุญูู ุงูุฃุฑุถ ุงูุฃูู ุนูุดุงู ุชุนุฑู ุฅูู ูุงูุตูุง. ุฒุฑุน ุงููุตูุต ุจุนูู ูููุณ ูุจูุณุงูุงุช ููุงุณุจุฉ (10-15 ุณู ุจูู ูู ูุต). ุงูุฑู ูุงุฒู ูููู ูุธุจูุทุ ุฎุตูุตูุง ููู ุจููููู ุงูุฑุงุณุ ุจุณ ุฅูุนู ุชูุชุฑ ููุฉ. ุฑุงูุจ ุงูุญุดุฑุงุช ูุงูุฃูุฑุงุถ ูู ุงูุฃููุ ุงูููุงูุฉ ุฃุญุณู ูู ุงูุนูุงุฌ. ูุงูุซูู ุนุงูุฒ ุดูุณ ูุชูุฑ (6 ุณุงุนุงุช ุนูู ุงูุฃูู ูููููุง). ููููุ ุงูุฃุฑุถ ุจุชุงุนุชู ููุนูุง ุฅููุ ูุจุชุฑูู ูู ูุฏ ุฅููุ",
    "ููุฏ ููุช ุจุชุญููู ูุฏู ุฎุตูุจู ุงูุชุฑุจู ุงูุฒุฑุงุนูู ุจุชุงุนุชู ู ูุงูุช ุงููุชูุฌู ุฎุตูุจู ุงูุงุฑุถ ููุฎูุถู ุงุฒุงู ุงุฐูุฏูุง ู ุงุญุณููุง": "ุจุต ูุง ุญุงุฌุ ูู ุงูุฃุฑุถ ุฎุตูุจุชูุง ููุฎูุถุฉุ ุฌุฑุจ ุงูุญุงุฌุงุช ุฏู: ุฒููุฏ ุฒุจู ุจูุฏู ุฃู ูููุจูุณุชุ ุฏู ุจูุฎููู ุงูุฃุฑุถ ุฃุฎุตุจ ููุญุณู ุชุตุฑูู ุงูููุฉ. ุฒุฑุน ูุญุงุตูู ุจููููุฉ ุฒู ุงูููู ุฃู ุงูุนุฏุณ ุจูุซุจุช ุงูููุชุฑูุฌููุ ูุฏู ุนูุตุฑ ููู ูููุจุงุชุงุช. ุบููุฑ ุงููุญุงุตูู ูู ุณูุฉ (ุชูุงูุจ ุฒุฑุงุนู) ุนูุดุงู ุงูุฃุฑุถ ูุชุณุชูุฒูุด. ุงุนูู ุชุญููู ุชุฑุจุฉ ูู ูุชุฑุฉุ ูุดูู ุฅูู ุงูุนูุงุตุฑ ุงููุงูุตุฉ ูุงุณุชุฎุฏู ุงูุณูุงุฏ ุงูููุงุณุจ. ููู ุงูุญุฑุซ ุงูุนููู ุนูุดุงู ุชุญุงูุธ ุนูู ุงููุงุฆูุงุช ุงูุญูุฉ ูู ุงูุฃุฑุถ. ูููู ูู ุนูุฏู ูุชุงูุฌ ุงูุชุญูููุ ุฅูู ุงูุนูุงุตุฑ ุงููุงูุตุฉุ",
    "ุงุนูู ุงูู ูู ุงูุจุฑูุฏู ุงูุดุฏูุฏู ุนูุฏ ุฒุฑุงุนู ุงูุฎูุงุฑ": "ุจุต ูุง ุจุงุดุงุ ุงูุฎูุงุฑ ุจูุญุจ ุงูุฌู ุงูุฏุงููุ ูุงูุจุฑูุฏุฉ ุงูุดุฏูุฏุฉ ูููู ุชุถุฑุจู ูุชุฎูููู ูุฐุจู ุฃู ูููุช. ุนุดุงู ุชุญููู: ุบุทูู ุงููุจุงุชุงุช ุจุจูุงุณุชูู ุดูุงู ุฃู ููุงุด ุฒุฑุงุนูุ ุฏู ุจูุฎููู ุฒู ุงูุฏููุฆุฉ ุงูุตุบูุฑุฉ ููุญูู ูู ุงูุตููุน. ุฅูุนู ุชุฑูู ูู ุงูุจุฑุฏ ุงููุงุฑุณุ ูุฃู ุงูููุฉ ุงูุจุงุฑุฏุฉ ุจุชุถุฑ ุงููุจุงุชุงุช. ุฒููุฏ ุณูุงุฏ ููู ุจูุชุงุณููู ูููุณููุฑุ ุฏู ุจูุฏู ุงููุจุงุช ููุฉ ููุงูู ุงูุจุฑุฏ. ุจุณ ุฅูุนู ุชูุชุฑ ูู ุงูููุชุฑูุฌูู ูู ุงูุฌู ุฏู. ููููุ ุงูุจุฑุฏ ุนูุฏู ูุตู ููุงู ุฏุฑุฌุฉุ ูููุณุชูุฑ ูุฏ ุฅููุ",
    "ูุง ูู ุงุญุณู ุณูุงุฏ ูููุงูุฌูุ": "ูุนุชูุฏ ุฃูุถู ุณูุงุฏ ูููุงูุฌู ุนูู ุนุฏุฉ ุนูุงูู ูููุง ููุน ุงูุชุฑุจุฉ ูุนูุฑ ุงูุฃุดุฌุงุฑ ููุณุชูู ุฎุตูุจุชูุง. ุจุดูู ุนุงูุ ุชุญุชุงุฌ ุงููุงูุฌู ุฅูู ุณูุงุฏ ูุชูุงุฒู ุบูู ุจุงูููุชุฑูุฌูู ูุงูููุณููุฑ ูุงูุจูุชุงุณููู. ููููู ุงุณุชุฎุฏุงู ุณูุงุฏ NPK ูุซู 15-15-15 ุฃู ุชุญุฏูุฏ ููุน ุงูุณูุงุฏ ุงูููุงุณุจ ูู ุฎูุงู ุชุญููู ุงูุชุฑุจุฉ. ูู ููุช ูุคุฎุฑูุง ุจุนูู ุชุญููู ูุชุฑุจุฉ ูุฒุฑุนุชูุ",
    "ููุฏ ููุช ูุคุฎุฑุง ุจุนูู ุชุญููู ุงูุชุฑุจุฉ ููุงูุช ุงููุชูุฌุฉ ุฃููุง ููุฎูุถุฉ ุงูุฎุตูุจุฉ": "ุฃูููุง ุจู ูุง ุตุฏููู! ูุจุฏู ุฃู ุชุฑุจุชู ุชุญุชุงุฌ ุฅูู ุชุญุณูู ุฎุตูุจุชูุง ูุฒุฑุงุนุฉ ุงููุงูุฌู. ุฃูุตุญู ุจุงุณุชุฎุฏุงู ุณูุงุฏ ุนุถูู ุบูู ุจุงูุจูุชุงุณููู ูุงูููุณููุฑ ูุซู ุณูุงุฏ ุฑูุซ ุงูุจูุฑ ุงููุชุญูู ุฌูุฏูุง ุฃู ุณูุงุฏ ุนุถูู ุขุฎุฑุ ูุน ูุฑุงุนุงุฉ ุฅุฌุฑุงุก ุชุญููู ุฏูุฑู ููุชุฑุจุฉ ูุถูุงู ููุงุตูุฉ ููู ุฃุดุฌุงุฑ ุงููุงูุฌู ุจุดูู ุณููู. ูู ูุฏูู ูุนูููุงุช ุฃูุซุฑ ุนู ููุน ุงูุชุฑุจุฉ ูุฏููุ",
  };

  void _sendMessage(String text) {
    if (text.trim().isEmpty) return;
    setState(() {
      messages.add({'from': 'user', 'text': text});
      _controller.clear();
      selectedQuickReply = null;
    });

    // Normalize input for case-insensitive and trimmed matching
    String normalizedText = text.trim().toLowerCase();
    String responseText = qaDatabase[normalizedText] ??
        "ุจุต ูุง ุณูุฏูุ ูุด ูุงูู ุณุคุงูู ูููุณ. ุฌุฑุจ ุงุณุฃู ุจุทุฑููุฉ ุชุงููุฉ ุฃู ุงุณุชุฎุฏู ุงูุฃุณุฆูุฉ ุงูุณุฑูุนุฉ! ๐";

    setState(() {
      messages.add({'from': 'bot', 'text': responseText});
    });
  }

  Widget _buildMessage(Map<String, String> msg) {
    final isUser = msg['from'] == 'user';
    return Align(
      alignment: isUser ? Alignment.centerRight : Alignment.centerLeft,
      child: Directionality(
        textDirection: isUser ? TextDirection.rtl : TextDirection.ltr,
        child: Row(
          mainAxisAlignment:
              isUser ? MainAxisAlignment.end : MainAxisAlignment.start,
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            if (!isUser)
              const CircleAvatar(
                backgroundColor: Color(0xFFE0ECE0),
                radius: 20,
                child: ClipOval(
                  child: Image(
                    image: AssetImage('assets/bot_icon.png'),
                    width: 26,
                    height: 26,
                    fit: BoxFit.cover,
                  ),
                ),
              ),
            if (!isUser) const SizedBox(width: 8),
            Flexible(
              child: Container(
                margin: const EdgeInsets.symmetric(vertical: 4),
                padding: const EdgeInsets.all(12),
                decoration: BoxDecoration(
                  color: isUser ? Colors.green.shade100 : Colors.grey.shade200,
                  borderRadius: BorderRadius.circular(12),
                ),
                child: Text(msg['text']!, style: const TextStyle(fontSize: 15)),
              ),
            ),
            if (isUser) const SizedBox(width: 8),
            if (isUser)
              const CircleAvatar(
                backgroundColor: Colors.green,
                radius: 16,
                child: Icon(Icons.person, size: 16, color: Colors.white),
              ),
          ],
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Directionality(
      textDirection: TextDirection.rtl,
      child: Scaffold(
        backgroundColor: Colors.white,
        appBar: AppBar(
          backgroundColor: Colors.white,
          elevation: 0,
          title: Row(
            children: [
              const CircleAvatar(
                backgroundColor: Color(0xFFE0ECE0),
                radius: 24,
                child: ClipOval(
                  child: Image(
                    image: AssetImage('assets/bot_icon.png'),
                    width: 30,
                    height: 30,
                    fit: BoxFit.cover,
                  ),
                ),
              ),
              const SizedBox(width: 10),
              Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  const Text(
                    "AgriBot",
                    style: TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.bold,
                      color: Colors.black,
                    ),
                  ),
                  Row(
                    children: [
                      Container(
                        width: 8,
                        height: 8,
                        decoration: const BoxDecoration(
                          color: Colors.green,
                          shape: BoxShape.circle,
                        ),
                      ),
                      const SizedBox(width: 5),
                      const Text(
                        "ุฏุงุฆู ุงููุดุงุท",
                        style: TextStyle(color: Colors.grey, fontSize: 12),
                      ),
                    ],
                  ),
                ],
              ),
            ],
          ),
        ),
        body: Column(
          children: [
            Expanded(
              child: ListView.builder(
                padding: const EdgeInsets.all(16),
                itemCount: messages.length + 1,
                itemBuilder: (context, index) {
                  if (index < messages.length) {
                    return _buildMessage(messages[index]);
                  } else {
                    final isLastBotMessage =
                        messages.isNotEmpty && messages.last['from'] == 'bot';
                    return isLastBotMessage && quickReplies.isNotEmpty
                        ? Padding(
                            padding: const EdgeInsets.only(top: 8),
                            child: Wrap(
                              spacing: 10,
                              runSpacing: 10,
                              children: quickReplies.map((text) {
                                final isSelected = selectedQuickReply == text;
                                return GestureDetector(
                                  onTap: () {
                                    _sendMessage(text);
                                    setState(() {
                                      selectedQuickReply = text;
                                    });
                                  },
                                  child: Container(
                                    padding: const EdgeInsets.symmetric(
                                      horizontal: 16,
                                      vertical: 10,
                                    ),
                                    decoration: BoxDecoration(
                                      color: isSelected
                                          ? Colors.green.shade700
                                          : const Color(0xFFF0F7F1),
                                      borderRadius: BorderRadius.circular(20),
                                    ),
                                    child: Text(
                                      text,
                                      style: TextStyle(
                                        color: isSelected
                                            ? Colors.white
                                            : Colors.black,
                                      ),
                                    ),
                                  ),
                                );
                              }).toList(),
                            ),
                          )
                        : const SizedBox.shrink();
                  }
                },
              ),
            ),
            Container(
              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
              color: Colors.grey.shade100,
              child: Row(
                children: [
                  Expanded(
                    child: TextField(
                      controller: _controller,
                      textDirection: TextDirection.rtl,
                      decoration: InputDecoration(
                        hintText: "ุงูุชุจ ุณุคุงูู ููุง...",
                        contentPadding: const EdgeInsets.symmetric(
                            horizontal: 16, vertical: 12),
                        filled: true,
                        fillColor: Colors.white,
                        border: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(24),
                          borderSide: BorderSide.none,
                        ),
                        enabledBorder: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(24),
                          borderSide: BorderSide.none,
                        ),
                        focusedBorder: OutlineInputBorder(
                          borderRadius: BorderRadius.circular(24),
                          borderSide: const BorderSide(color: Colors.green),
                        ),
                      ),
                    ),
                  ),
                  IconButton(
                    icon: const Icon(Icons.send, color: Colors.green),
                    onPressed: () => _sendMessage(_controller.text),
                  ),
                ],
              ),
            ),
          ],
        ),
        bottomNavigationBar: BottomNavigationBar(
          type: BottomNavigationBarType.fixed,
          selectedItemColor: Colors.green,
          unselectedItemColor: Colors.grey,
          currentIndex: 3,
          onTap: (index) {
            switch (index) {
              case 0:
                Navigator.pushNamed(context, '/home');
                break;
              case 1:
                Navigator.pushNamed(context, '/all');
                break;
              case 2:
                Navigator.pushNamed(context, '/analysis');
                break;
              case 3:
                Navigator.pushNamed(context, '/chat');
                break;
              case 4:
                Navigator.pushNamed(context, '/profile');
                break;
            }
          },
          items: const [
            BottomNavigationBarItem(icon: Icon(Icons.home), label: ''),
            BottomNavigationBarItem(icon: Icon(Icons.eco_outlined), label: ''),
            BottomNavigationBarItem(
                icon: Icon(Icons.science_outlined), label: ''),
            BottomNavigationBarItem(
                icon: Icon(Icons.chat_bubble_outline), label: 'ุฏุฑุฏุดุฉ'),
            BottomNavigationBarItem(
                icon: Icon(Icons.person_outline), label: ''),
          ],
        ),
      ),
    );
  }
}